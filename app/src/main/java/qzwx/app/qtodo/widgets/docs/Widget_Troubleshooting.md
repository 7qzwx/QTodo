# QTodo 小组件故障排除指南

## 小组件内容为空白问题

如果小组件显示为空白或不显示任何内容，可能由以下原因造成：

### 1. 数据库访问异常

小组件从数据库读取数据时可能发生异常，我们已添加异常处理和日志记录：
- 在WidgetDataService中增加了try-catch处理所有数据库操作
- 确保即使数据库读取失败也会返回空列表，而不是崩溃

### 2. 默认显示问题

修改了小组件代码以确保显示默认提示文本：
- 小组件初始化时设置默认提示文本为可见
- 添加了日志输出，便于调试

### 3. 更新周期

小组件设置为30分钟自动更新一次（updatePeriodMillis="1800000"）

### 4. 手动刷新

如果需要立即刷新小组件，可以：
- 重新添加小组件到桌面
- 或在应用内完成一些操作后等待小组件自动刷新

### 5. 查看日志

如果问题持续，请查看日志中以下标签的输出：
- "SimpleAppWidget"
- "WidgetDataService"

这些日志会记录数据获取和显示过程中的详细信息。

## 常见错误及解决方案

1. **数据库访问失败**：
   - 可能是因为数据库尚未初始化或结构变更
   - 确保应用至少运行一次，以初始化数据库

2. **布局渲染问题**：
   - 如果UI元素显示不正确，检查widget_simple.xml文件
   - 确保所有ID匹配并正确引用

3. **小组件不更新**：
   - Android系统对小组件更新有限制
   - 最小更新间隔为30分钟，系统可能会延迟更新以节省电量 